(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{65:function(t,a,s){"use strict";s.r(a);var n=s(0),o=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"簡単なjavascriptを書いてみる"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#簡単なjavascriptを書いてみる","aria-hidden":"true"}},[t._v("#")]),t._v(" 簡単なJavaScriptを書いてみる")]),s("p",[t._v("本格的な拡張の機能を作り始める前に、ポップアップ内で完結するごく簡単なスクリプトから始めたいと思います。わかる人はさらっと流してください。")]),s("h2",{attrs:{id:"ボタンを押したら文字を表示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ボタンを押したら文字を表示","aria-hidden":"true"}},[t._v("#")]),t._v(" ボタンを押したら文字を表示")]),s("h3",{attrs:{id:"本章で学べること"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本章で学べること","aria-hidden":"true"}},[t._v("#")]),t._v(" 本章で学べること")]),s("ul",[s("li",[t._v("ポップアップHTMLでJSを読み込む")])]),s("h3",{attrs:{id:"作るもの"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作るもの","aria-hidden":"true"}},[t._v("#")]),t._v(" 作るもの")]),s("p",[t._v("何にしようかなー。やっぱり最初はボタンを押したら何かするやつからですかねー。")]),s("p",[t._v('というわけで、ボタンを押したら "Hello World!" が出てくるやつにします。')]),s("h3",{attrs:{id:"htmlの用意"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#htmlの用意","aria-hidden":"true"}},[t._v("#")]),t._v(" HTMLの用意")]),s("p",[t._v("JSファイルもCSSと同様、ただHTMLから読み込むだけです。")]),s("p",[s("code",[t._v("index.html")]),t._v(" ちょっと書き換えて、さらに "),s("code",[t._v("<script>")]),t._v(" を追加します。まだ読み込む先のJSファイルは作ってないけど。")]),s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{attrs:{class:"token doctype"}},[t._v("<!doctype html>")]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),t._v("en")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Hello World!"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("rel")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("stylesheet"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/popup.css"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("yabaiMessage"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{attrs:{class:"token style-attr language-css"}},[s("span",{attrs:{class:"token attr-name"}},[t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("style")])]),s("span",{attrs:{class:"token punctuation"}},[t._v('="')]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token property"}},[t._v("display")]),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" none")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Hello World!"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sugoiButton"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Push me!"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{attrs:{class:"token attr-value"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/popup.js"),s("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token script language-javascript"}}),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),s("h3",{attrs:{id:"スクリプトを実装する"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#スクリプトを実装する","aria-hidden":"true"}},[t._v("#")]),t._v(" スクリプトを実装する")]),s("p",[s("code",[t._v("hello")]),t._v(" 配下に "),s("code",[t._v("popup.js")]),t._v(" を作成します。さっきHTMLに追加した "),s("code",[t._v("<script>")]),t._v(" で読み込むやつです。")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sugoiButton "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'#sugoiButton'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsugoiButton"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'click'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  sugoiButton"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("display "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'none'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  yabaiMessage"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("display "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("''")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("p",[t._v('これでどうでしょうか。ポップアップを開くと "Push me!" のボタンが表示され、それを押すと "Hello World!" の文字に置き換わるはずです。')]),s("h3",{attrs:{id:"よくできました"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#よくできました","aria-hidden":"true"}},[t._v("#")]),t._v(" よくできました")]),s("p",[t._v("というわけで、ポップアップ内で完結するものを作る分には、普通のHTML、普通のCSS、そして普通のJavaScriptを書くだけだということがおわかり頂けたかと思います。")]),s("p",[t._v("簡単でしょう？")]),s("p",[t._v("といってもそれだけじゃ何も面白くはないので、もうちょっと何かしてみましょう。")]),s("h3",{attrs:{id:"jqueryが恋しい？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jqueryが恋しい？","aria-hidden":"true"}},[t._v("#")]),t._v(" jQueryが恋しい？")]),s("p",[t._v("ポップアップについては前述の通り「普通のHTML」なので、普通にjQueryを読み込んで使うこともできます。まあそちらが良ければそちらでも構いません。")]),s("p",[t._v("もしjQueryから離れたコードを書き始めたいのでしたら、良い機会かもしれません。ただ、脱jQueryがゴールなのか、とにかくブラウザー拡張を作りたいのか、目標を決めておきましょう。勢い付けて二つ同時に目指すと、スッ転んだときに痛いです。")]),s("p",[t._v("jQuery使うにしろ使わないにしろ、難しいところはそこら辺じゃないです。")]),s("h2",{attrs:{id:"ブラウザー拡張のapiをひとつ使ってみる"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ブラウザー拡張のapiをひとつ使ってみる","aria-hidden":"true"}},[t._v("#")]),t._v(" ブラウザー拡張のAPIをひとつ使ってみる")]),s("p",[s("em",[t._v("※本章の内容はChromeとFirefoxで動きます。Edgeでは動きません。")])]),s("p",[t._v("ポップアップは出てきたけれど、書いたのは普通のHTML、普通のCSS、そして普通のJavaScriptでした。次はブラウザー拡張だけの機能を使ってみましょう。")]),s("p",[t._v("何にしようかな、雰囲気に慣れるための簡単なものが良いな。")]),s("p",[s("strong",[t._v("notifications API")]),t._v("を使ってみましょうか。")]),s("h3",{attrs:{id:"本章で学べること-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本章で学べること-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 本章で学べること")]),s("ul",[s("li",[t._v("ブラウザー拡張用のAPIの概要")]),s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/notifications",target:"_blank",rel:"noopener noreferrer"}},[t._v("browser.notifications")])]),s("li",[t._v("ブラウザー拡張用のパーミッションの設定")]),s("li",[s("code",[t._v("manifest.json")]),t._v(" - "),s("a",{attrs:{href:"https://developer.mozilla.org/ja/Add-ons/WebExtensions/manifest.json/permissions",target:"_blank",rel:"noopener noreferrer"}},[t._v("permissions")])]),s("li",[t._v("API仕様の調べ方")]),s("li",[t._v("API互換性の調べ方")])]),s("h3",{attrs:{id:"ブラウザー拡張用のapi群-chrome"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ブラウザー拡張用のapi群-chrome","aria-hidden":"true"}},[t._v("#")]),t._v(" ブラウザー拡張用のAPI群 "),s("code",[t._v("chrome")])]),s("p",[t._v("Chrome、Firefox共にグローバルの "),s("code",[t._v("chrome")]),t._v(" オブジェクト以下にAPI群が用意されています。例えば今回利用するAPIだと "),s("code",[t._v("chrome.notifications.create()")]),t._v(" というものを利用します。")]),s("p",[t._v("Edgeは "),s("code",[t._v("browser")]),t._v(" オブジェクトにそれが実装されているようです。なお "),s("code",[t._v("chrome")]),t._v(" オブジェクトも存在していて、しかしこれは全く別物のようです。（すみません、詳細はよくわかりません。）　Edgeで動かしたい場合はコード例の "),s("code",[t._v("chrome")]),t._v(" を "),s("code",[t._v("browser")]),t._v(" に置き換えてください。もしかしたら動くかもしれません。動かないかもしれません。今回（notifications API）は動きません。")]),s("p",[t._v("互換性は現時点ではまだ不完全で、標準化も完了していません。有用なAPIでも一部環境でしか使えないものがあったりします。")]),s("p",[t._v("APIについてはもうちょっと、互換性とかFirefoxの "),s("code",[t._v("browser")]),t._v(" オブジェクトとかの話もあるんだけど、後回しにします。")]),s("h3",{attrs:{id:"お知らせapiの使い方"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#お知らせapiの使い方","aria-hidden":"true"}},[t._v("#")]),t._v(" お知らせAPIの使い方")]),s("p",[t._v("とまあそういうわけでして、notification APIを使います。ウェブ標準の方の"),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Notification",target:"_blank",rel:"noopener noreferrer"}},[t._v("Notification API")]),t._v("とは別物で、許可を求めるポップアップも表示されません。（ブラウザー拡張インストール時に情報は表示されます。）")]),s("ul",[s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/en-US/Add-ons/WebExtensions/API/notifications",target:"_blank",rel:"noopener noreferrer"}},[t._v("notifications - Mozilla | MDN")])])]),s("p",[t._v("さっそくこいつをポップアップで試してみましょう。コードは簡単です。 "),s("code",[t._v("hello")]),t._v(" 内の "),s("code",[t._v("popup.js")]),t._v(" を開いて、以下の内容に書き換えます。")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sugoiButton "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'sugoiButton'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsugoiButton"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v("'click'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  chrome"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("notifications"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("create")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("null")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    type"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" chrome"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("notifications"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TemplateType"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token constant"}},[t._v("BASIC")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    iconUrl"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'/icon-90.png'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    title"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Hello World!'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    message"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'お元気ですか'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("p",[t._v("このコードは正しいので、コピペで一度試してみて頂きたいのですが、実は、動きません。繰り返しますが、"),s("strong",[t._v("このコードは正しい")]),t._v("けど、動かないんです。")]),s("p",[t._v("つまり"),s("strong",[t._v("このコードじゃないところが正しくない")]),t._v("ということですね。")]),s("p",[t._v("ともあれ、うまく動かないときはすぐコンソールにエラーが出ていないか確認してみてください。（ポップアップの中で右クリック→要素の検証とかそういうので出てきます。）")]),s("p",[t._v("Chromeであればこんなエラーが出ているはずです。")]),s("blockquote",[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("popup.js:3 Uncaught TypeError: Cannot read property 'create' of undefined\n    at HTMLButtonElement.sugoiButton.onclick (popup.js:3)\n")])])]),s("p",[t._v("Firefoxならこう。")]),s("blockquote",[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("TypeError: chrome.notifications is undefined [Learn More]  popup.js:3:5\n")])])]),s("p",[t._v("謎ですね、正しいコードのなずなのに "),s("code",[t._v("chrome.notificatiions")]),t._v(" が "),s("code",[t._v("undefined")]),t._v(" だぞと言われています。")]),s("p",[t._v("実はこのオブジェクトは、事前に"),s("strong",[t._v("パーミッションの設定")]),t._v("をしておかないと使えないのです。")]),s("h3",{attrs:{id:"パーミッションの設定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#パーミッションの設定","aria-hidden":"true"}},[t._v("#")]),t._v(" パーミッションの設定")]),s("p",[t._v("というわけで、設定します。")]),s("p",[s("code",[t._v("manifest.json")]),t._v(" を開いて、 "),s("code",[t._v('"permissions"')]),t._v(" を追加します。")]),s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token property"}},[t._v('"manifest_version"')]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token number"}},[t._v("2")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{attrs:{class:"token property"}},[t._v('"name"')]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Hello World!"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{attrs:{class:"token property"}},[t._v('"version"')]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"1.0.0"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{attrs:{class:"token property"}},[t._v('"author"')]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Ginpei"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{attrs:{class:"token property"}},[t._v('"permissions"')]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token string"}},[t._v('"notifications"')]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{attrs:{class:"token property"}},[t._v('"browser_action"')]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token property"}},[t._v('"default_icon"')]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"icon-90.png"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token property"}},[t._v('"default_title"')]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Hello World!"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token property"}},[t._v('"default_popup"')]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"index.html"')]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),s("p",[t._v("作業としてはこれだけです。更新後、ブラウザーの方では拡張を再読み込みしてください。 "),s("code",[t._v("manifest.json")]),t._v(" を更新したので、ポップアップを開きなおすだけじゃ足りないです。")]),s("p",[t._v("上記のように "),s("code",[t._v('"permissions"')]),t._v(" の設定を適切に行い、再読み込みして、もう一度ボタンを推せば、ほらちゃんと何かが出てくるはずです。")]),s("h3",{attrs:{id:"apiの使い方を調べる"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#apiの使い方を調べる","aria-hidden":"true"}},[t._v("#")]),t._v(" APIの使い方を調べる")]),s("p",[t._v("動いて良かった良かったというところですが、もうちょっとここをこうしたいなーとか思うかもしれません。今思わなくても、将来思うかもしれません。なので、APIの仕様を軽く調べておきましょう。")]),s("p",[t._v("Firefoxの製造元であるMozillaが管理する、MDNというサイトにリファレンスがあります。全てではありませんが、そこそこ日本語版も用意されています。")]),s("ul",[s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/ja/Add-ons/WebExtensions",target:"_blank",rel:"noopener noreferrer"}},[t._v("ブラウザー拡張機能 - Mozilla | MDN")])])]),s("p",[t._v("今回のnotification APIについては、「JavaScript API 群」に並んでいるのを見つけられます。")]),s("ul",[s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/ja/Add-ons/WebExtensions/API/notifications",target:"_blank",rel:"noopener noreferrer"}},[t._v("notifications - Mozilla | MDN")])]),s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/ja/Add-ons/WebExtensions/API/notifications/create",target:"_blank",rel:"noopener noreferrer"}},[t._v("notifications.create() - Mozilla | MDN")])])]),s("p",[t._v("書式はこうなっているそうです。")]),s("blockquote",[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" creating "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" browser"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("notifications"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("create")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  id"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                   "),s("span",{attrs:{class:"token comment"}},[t._v("// optional string")]),t._v("\n  options               "),s("span",{attrs:{class:"token comment"}},[t._v("// NotificationOptions")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("引数や戻り値がどうなってるのかわかりますね。良かった良かった。")]),s("p",[t._v("ページの下の方には「ブラウザ互換性」の項があります。ここを見れば、自分で実装して試すことなく確認することができます。")]),s("p",[t._v("どうやらEdgeでは実装されていないようです。"),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Notification#Browser_compatibility",target:"_blank",rel:"noopener noreferrer"}},[t._v("ウェブ標準のNotificationの方")]),t._v("はある程度実装が進んでいるようなので、こちらでフォールバックする必要があるかもしれません。まあ対象外にしちゃっても良いんだろうけど。")])])}],!1,null,null,null);a.default=o.exports}}]);